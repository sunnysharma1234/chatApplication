{"ast":null,"code":"import React,{useState}from\"react\";// import {IoSend} from \"react-icons/io5\"\n// import SendIcon from \"@mui/icons-material/Send\"\nimport SendIcon from\"@mui/icons-material/Send\";import{headers}from\"next/headers\";import axios from\"axios\";import{useDispatch,useSelector}from\"react-redux\";import{setMessages}from\"../redux/messageSlice\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SendInput=()=>{const[message,setMessage]=useState(\"\");const dispatch=useDispatch();const{selectedUser}=useSelector(store=>store.user);const{messages}=useSelector(store=>store.message);const onSubmitHandler=async e=>{// console.log(\"gjhgjh\")\ne.preventDefault();try{var _res$data;console.log(message);const res=await axios.post(`https://chatapplication-r3oq.onrender.com/api/v1/message/send/${selectedUser._id}`,{message},{headers:{'Content-Type':'application/json'},withCredentials:true});console.log(res);dispatch(setMessages([...messages,res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.newMessage]));}catch(error){console.log(error);}setMessage(\"\");};return/*#__PURE__*/_jsx(\"form\",{action:\"\",className:\"px-2 mt-3\",onSubmit:onSubmitHandler,children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"send a message\",className:\"border text-sm p-2 rounded-md block w-full bg-grey--600 text-black border-zinc-500\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"absolute flex inset-y-0 end-0 items-center pr-4\",children:/*#__PURE__*/_jsx(SendIcon,{})})]})});};export default SendInput;","map":{"version":3,"names":["React","useState","SendIcon","headers","axios","useDispatch","useSelector","setMessages","jsx","_jsx","jsxs","_jsxs","SendInput","message","setMessage","dispatch","selectedUser","store","user","messages","onSubmitHandler","e","preventDefault","_res$data","console","log","res","post","_id","withCredentials","data","newMessage","error","action","className","onSubmit","children","type","value","onChange","target","placeholder"],"sources":["C:/Users/Dell/Desktop/everyitem/chatbox/frontend/src/components/SendInput.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\n// import {IoSend} from \"react-icons/io5\"\r\n// import SendIcon from \"@mui/icons-material/Send\"\r\nimport SendIcon from \"@mui/icons-material/Send\";\r\nimport { headers } from \"next/headers\";\r\nimport axios from \"axios\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setMessages } from \"../redux/messageSlice\";\r\n\r\nconst SendInput = () => {\r\n  const [message, setMessage] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const { selectedUser } = useSelector((store) => store.user);\r\n  const { messages } = useSelector((store) => store.message);\r\n\r\n  const onSubmitHandler = async (e) => {\r\n    // console.log(\"gjhgjh\")\r\n    e.preventDefault();\r\n\r\n    try {\r\n      console.log(message);\r\n      const res = await axios.post(\r\n        `https://chatapplication-r3oq.onrender.com/api/v1/message/send/${selectedUser._id}`,\r\n        { message },\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          withCredentials: true,\r\n        }\r\n      );\r\n      \r\n      console.log(res);\r\n      dispatch(setMessages([...messages, res?.data?.newMessage]));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    setMessage(\"\");\r\n  };\r\n  return (\r\n    <form action=\"\" className=\"px-2 mt-3\" onSubmit={onSubmitHandler}>\r\n      <div className=\"w-full relative\">\r\n        <input\r\n          type=\"text\"\r\n          value={message}\r\n          onChange={(e) => setMessage(e.target.value)}\r\n          placeholder=\"send a message\"\r\n          className=\"border text-sm p-2 rounded-md block w-full bg-grey--600 text-black border-zinc-500\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className=\"absolute flex inset-y-0 end-0 items-center pr-4\"\r\n        >\r\n          <SendIcon />\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SendInput;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC;AACA;AACA,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,OAASC,OAAO,KAAQ,cAAc,CACtC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAAc,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEW,YAAa,CAAC,CAAGV,WAAW,CAAEW,KAAK,EAAKA,KAAK,CAACC,IAAI,CAAC,CAC3D,KAAM,CAAEC,QAAS,CAAC,CAAGb,WAAW,CAAEW,KAAK,EAAKA,KAAK,CAACJ,OAAO,CAAC,CAE1D,KAAM,CAAAO,eAAe,CAAG,KAAO,CAAAC,CAAC,EAAK,CACnC;AACAA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,KAAAC,SAAA,CACFC,OAAO,CAACC,GAAG,CAACZ,OAAO,CAAC,CACpB,KAAM,CAAAa,GAAG,CAAG,KAAM,CAAAtB,KAAK,CAACuB,IAAI,CAC1B,iEAAiEX,YAAY,CAACY,GAAG,EAAE,CACnF,CAAEf,OAAQ,CAAC,CACX,CACEV,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACD0B,eAAe,CAAE,IACnB,CACF,CAAC,CAEDL,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC,CAChBX,QAAQ,CAACR,WAAW,CAAC,CAAC,GAAGY,QAAQ,CAAEO,GAAG,SAAHA,GAAG,kBAAAH,SAAA,CAAHG,GAAG,CAAEI,IAAI,UAAAP,SAAA,iBAATA,SAAA,CAAWQ,UAAU,CAAC,CAAC,CAAC,CAC7D,CAAE,MAAOC,KAAK,CAAE,CACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC,CACpB,CACAlB,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,CACD,mBACEL,IAAA,SAAMwB,MAAM,CAAC,EAAE,CAACC,SAAS,CAAC,WAAW,CAACC,QAAQ,CAAEf,eAAgB,CAAAgB,QAAA,cAC9DzB,KAAA,QAAKuB,SAAS,CAAC,iBAAiB,CAAAE,QAAA,eAC9B3B,IAAA,UACE4B,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEzB,OAAQ,CACf0B,QAAQ,CAAGlB,CAAC,EAAKP,UAAU,CAACO,CAAC,CAACmB,MAAM,CAACF,KAAK,CAAE,CAC5CG,WAAW,CAAC,gBAAgB,CAC5BP,SAAS,CAAC,oFAAoF,CAC/F,CAAC,cACFzB,IAAA,WACE4B,IAAI,CAAC,QAAQ,CACbH,SAAS,CAAC,iDAAiD,CAAAE,QAAA,cAE3D3B,IAAA,CAACP,QAAQ,GAAE,CAAC,CACN,CAAC,EACN,CAAC,CACF,CAAC,CAEX,CAAC,CAED,cAAe,CAAAU,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}