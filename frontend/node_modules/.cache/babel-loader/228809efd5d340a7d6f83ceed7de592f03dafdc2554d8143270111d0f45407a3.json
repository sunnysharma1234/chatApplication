{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"DraftMode\", {\n  enumerable: true,\n  get: function () {\n    return DraftMode;\n  }\n});\nconst _staticgenerationasyncstorageexternal = require(\"./static-generation-async-storage.external\");\nconst _dynamicrendering = require(\"../../server/app-render/dynamic-rendering\");\nclass DraftMode {\n  get isEnabled() {\n    return this._provider.isEnabled;\n  }\n  enable() {\n    const store = _staticgenerationasyncstorageexternal.staticGenerationAsyncStorage.getStore();\n    if (store) {\n      // We we have a store we want to track dynamic data access to ensure we\n      // don't statically generate routes that manipulate draft mode.\n      (0, _dynamicrendering.trackDynamicDataAccessed)(store, \"draftMode().enable()\");\n    }\n    return this._provider.enable();\n  }\n  disable() {\n    const store = _staticgenerationasyncstorageexternal.staticGenerationAsyncStorage.getStore();\n    if (store) {\n      // We we have a store we want to track dynamic data access to ensure we\n      // don't statically generate routes that manipulate draft mode.\n      (0, _dynamicrendering.trackDynamicDataAccessed)(store, \"draftMode().disable()\");\n    }\n    return this._provider.disable();\n  }\n  constructor(provider) {\n    this._provider = provider;\n  }\n}\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"names":["DraftMode","isEnabled","_provider","enable","store","_staticgenerationasyncstorageexternal","staticGenerationAsyncStorage","getStore","_dynamicrendering","trackDynamicDataAccessed","disable","constructor","provider"],"sources":["../../../src/client/components/draft-mode.ts"],"sourcesContent":[null],"mappings":";;;;;+BAKa;;;WAAAA,SAAA;;;sDAHgC;kCACJ;AAElC,MAAMA,SAAA;EASX,IAAIC,UAAA,EAAY;IACd,OAAO,IAAI,CAACC,SAAS,CAACD,SAAS;EACjC;EACOE,OAAA,EAAS;IACd,MAAMC,KAAA,GAAQC,qCAAA,CAAAC,4BAA4B,CAACC,QAAQ;IACnD,IAAIH,KAAA,EAAO;MACT;MACA;MACA,IAAAI,iBAAA,CAAAC,wBAAwB,EAACL,KAAA,EAAO;IAClC;IACA,OAAO,IAAI,CAACF,SAAS,CAACC,MAAM;EAC9B;EACOO,QAAA,EAAU;IACf,MAAMN,KAAA,GAAQC,qCAAA,CAAAC,4BAA4B,CAACC,QAAQ;IACnD,IAAIH,KAAA,EAAO;MACT;MACA;MACA,IAAAI,iBAAA,CAAAC,wBAAwB,EAACL,KAAA,EAAO;IAClC;IACA,OAAO,IAAI,CAACF,SAAS,CAACQ,OAAO;EAC/B;EAvBAC,YAAYC,QAA2B,EAAE;IACvC,IAAI,CAACV,SAAS,GAAGU,QAAA;EACnB;AAsBF","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}